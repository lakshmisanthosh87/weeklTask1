(window.webpackJsonp=window.webpackJsonp||[]).push([[87],{uaKag2:function(e,o,n){"use strict";n.r(o),n.d(o,"isCouponlessOfferScheduled",(function(){return h})),n.d(o,"scheduleCouponlessOffer",(function(){return w})),n.d(o,"getCanApplyBackendCouponlessOffers",(function(){return N})),n.d(o,"setCanApplyBackendCouponlessOffers",(function(){return b})),n.d(o,"showNudgeOrModal",(function(){return S}));var t=n("q1tIBJ"),s=n.n(t),a=n("5Vmx6E"),u=n("ulHaMO"),c=n("jkfn8t"),d=n("CmD/rb"),l=n("khd0B9"),r=n("cy2ous"),i=n("rn+9dJ"),f=n("FZipub"),m=n("JOmocl"),p=n("clAFdK");var O=n("tc+wiD"),I=n.n(O),C=n("2faVpJ"),g=n.n(C);const v=new Map([["isCouponlessOfferScheduled",!1],["canApplyBackendCouponlessOffers",!1]]);function h(){return v.get("isCouponlessOfferScheduled")||!1}function w(e){v.set("isCouponlessOfferScheduled",e)}function N(){return v.get("canApplyBackendCouponlessOffers")||!1}function b(e){v.set("canApplyBackendCouponlessOffers",e)}function S({couponlessComm:e,hideNudge:o,showNudge:n,showModal:t,cartItems:O,storeInfo:C}){if(!e)return;const v=(({couponlessComm:e,cartItems:o,storeInfo:n})=>{var t,s,a,u,c;const d=null!==(t=null==e?void 0:e.offerId)&&void 0!==t?t:"0",l=n.storeId,r=Object(p.a)(n),i=null==r?void 0:r.find(e=>e.offer_id===d),O=null!==(s=null==i?void 0:i.minimum_order_value)&&void 0!==s?s:0,I=null!==(a=null==i?void 0:i.discount_type)&&void 0!==a?a:f.a.FLAT,C=null!==(u=null==i?void 0:i.discount_value)&&void 0!==u?u:0,g=null!==(c=null==i?void 0:i.discount_cap)&&void 0!==c?c:0,v=Object(m.j)(o);return{offerInfo:i,offerId:d,storeId:l,mov:O,discountType:I,discountValue:C,discountCap:g,cartTotal:v}})({couponlessComm:e,cartItems:O,storeInfo:C});e.movCrossed?(({couponlessComm:e,couponInfo:o,showModal:n})=>{if(!e)return;const t=s.a.createElement(a.a,{title:e.title,logoId:e.image,message:e.text}),{offerId:c,mov:i,discountType:f,discountValue:m,discountCap:p,cartTotal:O,storeId:C}=o,g={offerId:c,mov:i,discountType:f,discountValue:m,discountCap:p,cartTotal:O,storeId:C},v={[l.c.ON_OPEN]:()=>{Object(r.a)(d.a.IMPRESSION_SUCCESS_MODAL,g),Object(r.b)(d.a.IMPRESSION_SUCCESS_MODAL,{offerId:c,storeId:C,cartTotal:O,message:e.text})}},h={modalType:l.d.OK,showHeaderAction:!0,actions:{className:I.a.okButton,onOk:{text:s.a.createElement(u.a)}},content:{content:t,className:I.a.container}};"undefined"!=typeof window&&window.requestAnimationFrame(()=>{n({config:h,eventHandlers:v})})})({couponlessComm:e,couponInfo:v,showModal:t}):(({couponlessComm:e,showNudge:o,hideNudge:n,couponInfo:t,cartItems:a})=>{var u,f;if(!e)return;const{offerId:m,offerInfo:p,storeId:O,cartTotal:I}=t,C=s.a.createElement(c.a,{message:e.text,imageId:e.image,cta:e.cta||{text:"",link:""},onCtaClick:()=>{n()}}),[v=0]=p?Object(i.b)(p,a):[0],h=(null!==(u=null==p?void 0:p.minimum_order_value)&&void 0!==u?u:0)-v,w={offerId:m,message:e.text,ctaText:(null===(f=e.cta)||void 0===f?void 0:f.text)||"",nudgeThreshold:null==p?void 0:p.nudge.threshold,nudgeFrequency:null==p?void 0:p.nudge.frequency},N=Object.assign(Object.assign({},w),{storeId:O,cartTotal:I,movBal:h}),b={[l.f.ON_OPEN]:()=>{Object(r.a)(d.a.IMPRESSION_NUDGE,w),Object(r.b)(d.a.IMPRESSION_NUDGE,N)},[l.f.ON_CLOSE]:({trigger:e})=>{Object(r.a)(d.a.CLICK_NUDGE_CLOSE,Object.assign(Object.assign({},w),{closeReason:e})),Object(r.b)(d.a.CLICK_NUDGE_CLOSE,N)}};"undefined"!=typeof window&&window.requestAnimationFrame(()=>{const n={content:{content:C},autoHideDuration:null==e?void 0:e.timeout,className:g.a.containerWithCssVariableHeight};o({config:n,eventHandlers:b})})})({couponlessComm:e,couponInfo:v,showNudge:n,hideNudge:o,cartItems:O}),b(!1),w(!1)}}}]);
//# sourceMappingURL=couponless-be-helpers.es6.291af74deae2d9af.js.map